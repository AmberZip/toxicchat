local TextChatService = game:GetService("TextChatService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local channel = TextChatService.TextChannels:WaitForChild("RBXGeneral")

-- === Random Chat Spam Messages (Slap Battles Theme) ===
local messages = {
    "You get slapped more than a mosquito in summer 🦟",
    "Your glove choice says 'perma L' 😭",
    "Imagine missing a slap point blank 💀",
    "You're the reason the void exists 😹",
    "Your KD is just K for Krusty 🤡",
    "Not even Bob would waste time on you 🪦",
    "You die faster than someone with default glove in slap royale ☠️",
    "Slap power: 0. Brain power: also 0 🔌",
    "I’ve seen rock gloves do more than you 🪨",
    "Your game sense is like RNG—nonexistent 🎲",
    "Even the table glove wouldn’t carry you 📉",
    "Bro got pinged into the next lobby 📡",
    "You slap like you're asking politely 🫴",
    "Your glove's better than your skill—barely 🤖",
    "Only thing you combo is respawns 🔁",
    "You must think the void gives points 😭",
    "Your only W is watching others win 👀",
    "Bob sees you and walks away 💀",
    "You'd miss with extended reach 😐",
    "You fell off harder than Elude glove 😬",
    "Bro gets juked by AFK players 🤡",
    "You're the NPC Slapple warns us about 🤖",
    "Your slaps are weaker than Woah glove 💨",
    "You panic teleport into the void 😹",
    "Skill diff so wide it’s a canyon 🌄",
    "Even Reverse doesn't want your slap back 🔄",
    "You’re a walking slap donation machine 💸",
    "Glove tier: God. Player tier: Trash 🗑️",
    "Every time you slap, a noob gets stronger ✨",
    "Void farming? You're just farming Ls 📦"
}

-- === Trigger Word Categories ===
local triggers = {
    Accusations = {"exploit", "cheat", "hacker", "script", "exploit", "abuse", "autoclick", "macro"},
    SkillTrash = {"noob", "trash", "bad", "ez", "carried", "skill issue", "get good"},
    TryhardClaims = {"sweat", "tryhard", "nerd", "no life", "overkill", "touch grass"},
    Crybabies = {"stop", "unfair", "abuse", "why", "toxic", "please", "report"},
    LagBlamers = {"lag", "ping", "desync", "rubberband", "delay"},
    OneVOne = {"1v1", "duel", "square up", "fight me"},
    Hackusation2 = {"aimbot", "trigger", "auto", "esp", "hitbox", "reach"},
    Carried = {"carried", "deadweight", "bottom frag", "backpack", "useless"},
    RandomToxic = {"cry", "mad", "kid", "salty", "rage", "baby"},
    GearBlamers = {"op glove", "pay to win", "broken glove", "nerf", "unbalanced"}
}

-- === Slap Battles Specific Roasts ===
local replies = {
    Accusations = {
        "%s, blaming exploits won’t save you from Ls 💀",
        "You call it hacking, I call it skill 😎 %s",
        "Even Bob plays more legit than you, %s 🪦",
        "Report me after you learn how to slap, %s 👋",
        "You're not losing to scripts, you're losing to facts, %s 📉"
    },
    SkillTrash = {
        "%s, you're the tutorial boss of Slap Battles 🤡",
        "Skill issue? Nah, full-on gameplay crisis, %s 🚨",
        "You can’t even land a slap with extended 😭 %s",
        "%s, get good before you get gloves 🔧",
        "You're not trash %s, you're biodegradable ♻️"
    },
    TryhardClaims = {
        "%s calling tryhard when they can't dodge a bus glove 😭",
        "Sorry I slapped you into orbit %s 🚀",
        "%s, grass is for those who can't touch the leaderboard 💀",
        "Tryhard? You tried nothing and still failed 😬 %s",
        "%s, get a better excuse before you cry next round 🧂"
    },
    Crybabies = {
        "Crying already, %s? Just uninstall 😭",
        "%s, this isn’t daycare, this is SLAP BATTLES 💢",
        "Keep crying, %s, the void loves your tears 😹",
        "Report me for being better? Stay mad %s 🤣",
        "Skill hurts your feelings huh %s 💀"
    },
    LagBlamers = {
        "Lag isn't your enemy, skill is, %s 📶💀",
        "%s always lags right after losing 😭",
        "Bro blames ping for walking into Slapple 😐 %s",
        "Lag? No, just pure garbage gameplay %s 🗑️",
        "Desync? More like excuse.exe crashing again %s 💾"
    },
    OneVOne = {
        "1v1 you? You’d fall off the map before we start 😹 %s",
        "%s, I'd 1v1 but bullying isn’t allowed 🤡",
        "You want a duel? Try dueling your awareness first %s 👁️",
        "Fight you? You get outplayed by AFKs %s 😂",
        "Your ego's the only thing bigger than your Ls %s 🥴"
    },
    Hackusation2 = {
        "No aimlock, just aim skill. Cope, %s 🎯",
        "%s thinks skill is hacks 😭",
        "If I was cheating I’d be farming faster, %s 💀",
        "You losing doesn’t equal me hacking, %s 🤡",
        "Even Anticheat slapped you for crying, %s 📋"
    },
    Carried = {
        "Carried? %s, you’re the glove I’m dragging 🧤",
        "You’re not even on the team, just extra weight %s 🧱",
        "%s spectates more than they play 😂",
        "Deadweight like %s makes me stronger 💪",
        "You ain’t carried, you're cargo 🚚 %s"
    },
    RandomToxic = {
        "Cry harder %s, it fuels my slap streak 😈",
        "%s salty enough to be used on fries 🍟",
        "You're raging harder than the bus glove impact %s 💥",
        "You mad %s? Go slap a wall 🤡",
        "Touching grass won’t save you now %s 🌱"
    },
    GearBlamers = {
        "%s mad because my glove has better synergy 💀",
        "OP glove? Cope harder, %s 😎",
        "%s crying about loadout instead of adapting 📉",
        "It’s not pay to win, it’s you refusing to learn 🤓 %s",
        "Broken glove? Nah, you’re broken at the game %s ⚠️"
    }
}

-- === Utility ===
local function shuffle(t)
    for i = #t, 2, -1 do
        local j = math.random(i)
        t[i], t[j] = t[j], t[i]
    end
end

local function containsTrigger(text, triggerList)
    local lowered = text:lower()
    for _, trigger in ipairs(triggerList) do
        if string.find(lowered, trigger) then
            return true
        end
    end
    return false
end

-- === Auto Message Spam ===
task.spawn(function()
    while true do
        shuffle(messages)
        for _, msg in ipairs(messages) do
            if channel then
                channel:SendAsync(msg)
            end
            task.wait(5) -- Adjust for how aggressive you want it
        end
    end
end)

-- === Reactive Slapbacks ===
TextChatService.MessageReceived:Connect(function(message)
    local sender = message.TextSource
    local text = message.Text

    if not sender or sender.UserId == LocalPlayer.UserId then return end
    local name = sender.Name

    for category, triggerList in pairs(triggers) do
        if containsTrigger(text, triggerList) then
            local categoryReplies = replies[category]
            if categoryReplies then
                local reply = string.format(categoryReplies[math.random(1, #categoryReplies)], name)
                channel:SendAsync(reply)
                break
            end
        end
    end
end)
