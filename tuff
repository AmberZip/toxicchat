local TextChatService = game:GetService("TextChatService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local channel = TextChatService.TextChannels:WaitForChild("RBXGeneral")

-- === Random Chat Spam Messages (Slap Battles Theme) ===
local messages = {
    "You get slapped more than a mosquito in summer ğŸ¦Ÿ",
    "Your glove choice says 'perma L' ğŸ˜­",
    "Imagine missing a slap point blank ğŸ’€",
    "You're the reason the void exists ğŸ˜¹",
    "Your KD is just K for Krusty ğŸ¤¡",
    "Not even Bob would waste time on you ğŸª¦",
    "You die faster than someone with default glove in slap royale â˜ ï¸",
    "Slap power: 0. Brain power: also 0 ğŸ”Œ",
    "Iâ€™ve seen rock gloves do more than you ğŸª¨",
    "Your game sense is like RNGâ€”nonexistent ğŸ²",
    "Even the table glove wouldnâ€™t carry you ğŸ“‰",
    "Bro got pinged into the next lobby ğŸ“¡",
    "You slap like you're asking politely ğŸ«´",
    "Your glove's better than your skillâ€”barely ğŸ¤–",
    "Only thing you combo is respawns ğŸ”",
    "You must think the void gives points ğŸ˜­",
    "Your only W is watching others win ğŸ‘€",
    "Bob sees you and walks away ğŸ’€",
    "You'd miss with extended reach ğŸ˜",
    "You fell off harder than Elude glove ğŸ˜¬",
    "Bro gets juked by AFK players ğŸ¤¡",
    "You're the NPC Slapple warns us about ğŸ¤–",
    "Your slaps are weaker than Woah glove ğŸ’¨",
    "You panic teleport into the void ğŸ˜¹",
    "Skill diff so wide itâ€™s a canyon ğŸŒ„",
    "Even Reverse doesn't want your slap back ğŸ”„",
    "Youâ€™re a walking slap donation machine ğŸ’¸",
    "Glove tier: God. Player tier: Trash ğŸ—‘ï¸",
    "Every time you slap, a noob gets stronger âœ¨",
    "Void farming? You're just farming Ls ğŸ“¦"
}

-- === Trigger Word Categories ===
local triggers = {
    Accusations = {"exploit", "cheat", "hacker", "script", "exploit", "abuse", "autoclick", "macro"},
    SkillTrash = {"noob", "trash", "bad", "ez", "carried", "skill issue", "get good"},
    TryhardClaims = {"sweat", "tryhard", "nerd", "no life", "overkill", "touch grass"},
    Crybabies = {"stop", "unfair", "abuse", "why", "toxic", "please", "report"},
    LagBlamers = {"lag", "ping", "desync", "rubberband", "delay"},
    OneVOne = {"1v1", "duel", "square up", "fight me"},
    Hackusation2 = {"aimbot", "trigger", "auto", "esp", "hitbox", "reach"},
    Carried = {"carried", "deadweight", "bottom frag", "backpack", "useless"},
    RandomToxic = {"cry", "mad", "kid", "salty", "rage", "baby"},
    GearBlamers = {"op glove", "pay to win", "broken glove", "nerf", "unbalanced"}
}

-- === Slap Battles Specific Roasts ===
local replies = {
    Accusations = {
        "%s, blaming exploits wonâ€™t save you from Ls ğŸ’€",
        "You call it hacking, I call it skill ğŸ˜ %s",
        "Even Bob plays more legit than you, %s ğŸª¦",
        "Report me after you learn how to slap, %s ğŸ‘‹",
        "You're not losing to scripts, you're losing to facts, %s ğŸ“‰"
    },
    SkillTrash = {
        "%s, you're the tutorial boss of Slap Battles ğŸ¤¡",
        "Skill issue? Nah, full-on gameplay crisis, %s ğŸš¨",
        "You canâ€™t even land a slap with extended ğŸ˜­ %s",
        "%s, get good before you get gloves ğŸ”§",
        "You're not trash %s, you're biodegradable â™»ï¸"
    },
    TryhardClaims = {
        "%s calling tryhard when they can't dodge a bus glove ğŸ˜­",
        "Sorry I slapped you into orbit %s ğŸš€",
        "%s, grass is for those who can't touch the leaderboard ğŸ’€",
        "Tryhard? You tried nothing and still failed ğŸ˜¬ %s",
        "%s, get a better excuse before you cry next round ğŸ§‚"
    },
    Crybabies = {
        "Crying already, %s? Just uninstall ğŸ˜­",
        "%s, this isnâ€™t daycare, this is SLAP BATTLES ğŸ’¢",
        "Keep crying, %s, the void loves your tears ğŸ˜¹",
        "Report me for being better? Stay mad %s ğŸ¤£",
        "Skill hurts your feelings huh %s ğŸ’€"
    },
    LagBlamers = {
        "Lag isn't your enemy, skill is, %s ğŸ“¶ğŸ’€",
        "%s always lags right after losing ğŸ˜­",
        "Bro blames ping for walking into Slapple ğŸ˜ %s",
        "Lag? No, just pure garbage gameplay %s ğŸ—‘ï¸",
        "Desync? More like excuse.exe crashing again %s ğŸ’¾"
    },
    OneVOne = {
        "1v1 you? Youâ€™d fall off the map before we start ğŸ˜¹ %s",
        "%s, I'd 1v1 but bullying isnâ€™t allowed ğŸ¤¡",
        "You want a duel? Try dueling your awareness first %s ğŸ‘ï¸",
        "Fight you? You get outplayed by AFKs %s ğŸ˜‚",
        "Your ego's the only thing bigger than your Ls %s ğŸ¥´"
    },
    Hackusation2 = {
        "No aimlock, just aim skill. Cope, %s ğŸ¯",
        "%s thinks skill is hacks ğŸ˜­",
        "If I was cheating Iâ€™d be farming faster, %s ğŸ’€",
        "You losing doesnâ€™t equal me hacking, %s ğŸ¤¡",
        "Even Anticheat slapped you for crying, %s ğŸ“‹"
    },
    Carried = {
        "Carried? %s, youâ€™re the glove Iâ€™m dragging ğŸ§¤",
        "Youâ€™re not even on the team, just extra weight %s ğŸ§±",
        "%s spectates more than they play ğŸ˜‚",
        "Deadweight like %s makes me stronger ğŸ’ª",
        "You ainâ€™t carried, you're cargo ğŸšš %s"
    },
    RandomToxic = {
        "Cry harder %s, it fuels my slap streak ğŸ˜ˆ",
        "%s salty enough to be used on fries ğŸŸ",
        "You're raging harder than the bus glove impact %s ğŸ’¥",
        "You mad %s? Go slap a wall ğŸ¤¡",
        "Touching grass wonâ€™t save you now %s ğŸŒ±"
    },
    GearBlamers = {
        "%s mad because my glove has better synergy ğŸ’€",
        "OP glove? Cope harder, %s ğŸ˜",
        "%s crying about loadout instead of adapting ğŸ“‰",
        "Itâ€™s not pay to win, itâ€™s you refusing to learn ğŸ¤“ %s",
        "Broken glove? Nah, youâ€™re broken at the game %s âš ï¸"
    }
}

-- === Utility ===
local function shuffle(t)
    for i = #t, 2, -1 do
        local j = math.random(i)
        t[i], t[j] = t[j], t[i]
    end
end

local function containsTrigger(text, triggerList)
    local lowered = text:lower()
    for _, trigger in ipairs(triggerList) do
        if string.find(lowered, trigger) then
            return true
        end
    end
    return false
end

-- === Auto Message Spam ===
task.spawn(function()
    while true do
        shuffle(messages)
        for _, msg in ipairs(messages) do
            if channel then
                channel:SendAsync(msg)
            end
            task.wait(5) -- Adjust for how aggressive you want it
        end
    end
end)

-- === Reactive Slapbacks ===
TextChatService.MessageReceived:Connect(function(message)
    local sender = message.TextSource
    local text = message.Text

    if not sender or sender.UserId == LocalPlayer.UserId then return end
    local name = sender.Name

    for category, triggerList in pairs(triggers) do
        if containsTrigger(text, triggerList) then
            local categoryReplies = replies[category]
            if categoryReplies then
                local reply = string.format(categoryReplies[math.random(1, #categoryReplies)], name)
                channel:SendAsync(reply)
                break
            end
        end
    end
end)
