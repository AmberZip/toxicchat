local TextChatService = game:GetService("TextChatService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local channel = TextChatService.TextChannels:WaitForChild("RBXGeneral")

-- === Main Random Messages ===
local messages = {
    "Imagine thinking you're good 💀",
    "Bro plays like his monitor's off 😹",
    "You miss more than you hit 🤡",
    "Lag can't explain that performance 😭",
    "Skill issue. Cope harder 😒",
    "Not even carried, just baggage 🎒",
    "Every time you load in, the lobby cries 💀",
    "Ratio'd in real life and in-game 📉📉",
    "You're the reason the team loses 😂",
    "Playing like it's your first time 🍼",
    "Even bots laugh at your gameplay 🤖😂",
    "Did you install the game or the virus? 🦠",
    "You got outplayed by a fridge 💡",
    "If you were a loadout, you'd be all gray 💩",
    "Your presence lowers team morale 📉",
    "You camp harder than summer break ⛺",
    "Even the devs want you to uninstall 🗑️",
    "Bro gets carried by gravity 🤕",
    "You're the lag, not on it 😐",
    "More bricks than a construction site 🧱",
    "You play like a cutscene 😴",
    "Bro's KD ratio spells 'help' 🆘",
    "You reload more than you shoot 🔫🔄",
    "Even your shadow left mid-match ☠️",
    "I’ve seen toasters react faster 🔌",
    "You aim like you closed your eyes 👀✖️",
    "Game sense? You have game nonsense 🚫",
    "You’re the reason tutorials exist 📚",
    "You peak corners like it’s peekaboo 👶",
    "If dying was a skill, you’d be pro 🏆",
    "Whole lobby sees you and thinks 'free kill' 🎯",
    "Your highlight reel is just respawns 🔁",
    "You drop in like loot, and die like one too 📦"
}

-- === Trigger Word Lists ===
local triggers = {
    Accusations = {"hacker", "cheater", "scripter", "script", "exploit", "exploiter", "hacking", "exploiting"},
    SkillTrash = {"you're bad", "trash", "noob", "ez", "carried", "get good", "skill issue"},
    TryhardClaims = {"tryhard", "sweat", "nerd", "no life", "touch grass", "overkill"},
    Crybabies = {"unfair", "report", "stop", "toxic", "abuse", "why", "please"},
    LagBlamers = {"lag", "ping", "rubberband", "delay", "desync"},
    OneVOne = {"1v1", "duel", "fight me", "square up", "mano a mano"},
    Hackusation2 = {"aimbot", "esp", "wallhack", "auto aim", "snap aim"},
    Carried = {"carried", "deadweight", "backpack", "useless", "bottom frag"},
    RandomToxic = {"kid", "mad", "cry", "salty", "rage", "baby"},
    GearBlamers = {"pay to win", "op weapon", "unfair gun", "broken kit", "nerf this"}
}

-- === Custom Reply Lists ===
local replies = {
    Accusations = {
        "%s, cry harder. Even your accusations are mid 💀",
        "You're just mad you're bad, %s. Cope and seethe 😭",
        "%s blaming scripts like they didn’t walk into bullets 💀",
        "Even anti-cheat laughed at your complaint, %s 🤡",
        "Skill gap so wide, %s called it a glitch 🚪"
    },
    SkillTrash = {
        "%s, you talk big for someone bottom fragging every game 🗑️",
        "Loud words for low stats, %s 📉",
        "You're one more loss away from uninstalling, %s 😭",
        "Noob? %s, you're the pre-installed version 😐",
        "The only thing you carry is failure, %s 💼"
    },
    TryhardClaims = {
        "%s, sorry I’m good and you’re not 😈",
        "Skill is free, %s. Grass is DLC 🌱",
        "Blaming effort? Stay bronze, %s 🥉",
        "You're allergic to effort huh, %s 🤧",
        "Maybe try harding at not being garbage, %s 💀"
    },
    Crybabies = {
        "Oh no, %s is crying again 😭",
        "Skill hurts your feelings, %s? Good 💀",
        "%s reporting me like it's gonna fix your skill issue 📋",
        "This isn’t a daycare, %s 💢",
        "Your tears power my KD, %s 🔥"
    },
    LagBlamers = {
        "Sure, %s. Blame lag instead of your slow brain 🧠📶",
        "Lag didn’t make you walk into my shots, %s 💀",
        "%s blaming ping while standing still like a statue 🗿",
        "Your ping isn't the problem, it's your aim %s 👓",
        "Lag? More like excuses.exe, %s 🔧"
    },
    OneVOne = {
        "1v1? %s, you wouldn’t survive the loading screen 🖥️",
        "I'd 1v1 you but bullying is against TOS, %s 🤡",
        "Your KD can’t even 1v1 gravity, %s 📉",
        "%s, you’d bring a knife to a nuke fight ☢️",
        "1v1? You'd still lose with walls turned off, %s 😂"
    },
    Hackusation2 = {
        "Aimbot? Nah %s, just raw talent 💯",
        "Wallhacks? Or just wallbanged your ego, %s 🎯",
        "%s really said ESP while staring at spawn 🥲",
        "You’d still lose if I played blindfolded, %s 🥷",
        "Aim too clean? Thanks for the compliment %s 😎"
    },
    Carried = {
        "%s, I carry harder than DoorDash 🛒",
        "You weigh down the team like lag, %s 🧱",
        "%s is just a spectator with a gun 🎥🔫",
        "You’re not even carried, you’re cargo 🚚 %s",
        "Team player? Nah, you're team burden, %s 📉"
    },
    RandomToxic = {
        "You mad, %s? You sound like a Discord mod losing mod powers 🧂",
        "Cry louder, %s. I’m farming salt today 💧",
        "%s raging like it’s ranked in 2012 💀",
        "Go outside %s. Touching grass isn’t lethal 🌱",
        "%s brings nothing but noise and disappointment 🎧"
    },
    GearBlamers = {
        "You said OP weapon, %s? Sounds like a skill diff 💀",
        "Broken kit? More like broken ego, %s 🧠",
        "%s blaming gear like I didn't outplay you with it 🔫",
        "Pay to win? You didn’t even try, %s 💤",
        "%s crying over loadouts instead of learning 💡"
    }
}

-- === Utility Functions ===
local function shuffle(t)
    local n = #t
    for i = n, 2, -1 do
        local j = math.random(i)
        t[i], t[j] = t[j], t[i]
    end
end

local function containsTrigger(text, triggerList)
    local lowered = text:lower()
    for _, trigger in ipairs(triggerList) do
        if string.find(lowered, trigger) then
            return true
        end
    end
    return false
end

-- === Auto Spam Messages ===
task.spawn(function()
    while true do
        shuffle(messages)
        for _, msg in ipairs(messages) do
            if channel then
                channel:SendAsync(msg)
            end
            task.wait(5)
        end
    end
end)

-- === Reactive Insults ===
TextChatService.MessageReceived:Connect(function(message)
    local sender = message.TextSource
    local text = message.Text

    if not sender or sender.UserId == LocalPlayer.UserId then return end
    local name = sender.Name

    for category, triggerList in pairs(triggers) do
        if containsTrigger(text, triggerList) then
            local categoryReplies = replies[category]
            if categoryReplies then
                local reply = string.format(categoryReplies[math.random(1, #categoryReplies)], name)
                channel:SendAsync(reply)
                break
            end
        end
    end
end)
